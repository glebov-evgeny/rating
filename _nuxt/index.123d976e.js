import{l as S,X as x,m as D,r as m,p as T,o as b,c as E,b as e,f as p,t as f,u as a,q as h,v,n as C,s as F,x as k,e as V,a as I,y as U,z as A,A as B}from"./entry.8767be93.js";async function M(i){const d=S();await x(D(d,"date","date"),i)}const N={class:"s-admin"},X={class:"s-admin__container l-wide"},$=e("h1",{class:"s-admin__title"},"Панель администратора:",-1),j={class:"s-admin__top"},z={class:"s-admin__row"},O={class:"s-admin__column"},q={class:"s-admin__subtitle"},L={class:"s-admin__date"},P={class:"s-admin__column"},R={class:"s-admin__subtitle"},G={class:"s-admin__date"},H={class:"s-admin__row"},J={class:"s-admin__column"},K=e("h3",{class:"s-admin__subtitle"},"Загрузить:",-1),Q=["onClick"],W={__name:"s-admin",props:{dates:{type:Object,default(){return{}}}},setup(i){const d=i;let _=m(null),l=m(""),t=T({dateStart:"",dateEnd:"",dateCurrent:"",fileImport:""});const r=()=>{l.value=_.value.files[0].name},s=c=>c.split("-").reverse().join(".");async function u(){t.dateCurrent=s(new Date().toISOString().split("T")[0]),t.dateStart=s(t.dateStart),t.dateEnd=s(t.dateEnd),t.dateStart===""&&(t.dateStart=d.dates.dateStart),t.dateEnd===""&&(t.dateEnd=d.dates.dateEnd),t.fileImport=await w(_.value.files[0]),M(t),l.value="",k("/")}function w(c){return new Promise(n=>{let o=new FileReader;o.onload=function(y){let g=y.target.result;n(g)},o.readAsText(c)})}return(c,n)=>(b(),E("section",N,[e("div",X,[$,e("div",j,[e("div",z,[e("div",O,[e("h3",q,[p(" Дата начала периода: "),e("span",L,f(a(t).dateStart!=""?s(a(t).dateStart):i.dates.dateStart),1)]),h(e("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>a(t).dateStart=o),type:"date",class:"s-admin__input"},null,512),[[v,a(t).dateStart]])]),e("div",P,[e("h3",R,[p(" Дата завершения периода: "),e("span",G,f(a(t).dateEnd!=""?s(a(t).dateEnd):i.dates.dateEnd),1)]),h(e("input",{"onUpdate:modelValue":n[1]||(n[1]=o=>a(t).dateEnd=o),type:"date",class:"s-admin__input"},null,512),[[v,a(t).dateEnd]])])]),e("div",H,[e("div",J,[K,e("input",{ref_key:"fileToDownload",ref:_,type:"file",class:"s-admin__input","on:change":n[2]||(n[2]=o=>r())},null,544)])]),e("button",{class:C(a(l)===""?"s-admin__button s-admin__button-disabled":"s-admin__button"),onClick:F(u,["prevent"])}," отправить ",10,Q)])])]))}},Y={class:"s-main"},tt={__name:"index",setup(i){let d=m({});const _=()=>{const l=S(),t=U(A(l,"date"));B(t,r=>{const s=[];r.forEach(u=>{s.push(u.data())}),s.length?d.value=s[0]:console.log("no data")})};return V(()=>{_()}),(l,t)=>{const r=W;return b(),E("main",Y,[I(r,{dates:a(d)},null,8,["dates"])])}}};export{tt as default};
